extends _layout

block content
	style(type='text/css').
		@media only screen and (orientation : landscape) {
			body {
				background-image: url(https://www.fortbendisd.com/cms/lib/TX01917858/Centricity/ModuleInstance/28091/IMG_3059.jpg);
				background-color: rgb(200, 200, 200);
				background-blend-mode: screen;
				background-position: center;
				background-repeat: no-repeat;
				background-size: cover;
				background-attachment: fixed;
				margin-bottom: 0;
				min-height: 100%;
			}
		}

		#teamlist {
			white-space: pre-line;
			color: black;
		}

		.l {
			font-size: 2.5rem;
			display:inline;
		}
		.m {
			font-size: 2rem;
			display:inline;
		}
		.s {
			font-size: 1.5rem;
			display:inline;
		}
		.bullet {
			font-size: 2rem;
		}
		h2 {
			margin-top: 8rem;
		}

	script.
		//////////////////////TEAMLIST READING AND WRITING//////////////////////

		function check() {
			var list = '';
			$.get('http://gaminged.com/ei1/chsinvite/teams.txt?refresh=' + Math.random(), function(data) {
				$('#teamlist').text(data);
			});
		}

		function signupForInvite() {
			$.ajax({
				url: 'http://gaminged.com/ei1/jets/esus/apply.php' +
				'?user=' + localStorage.getItem('user') +
				'&pass=' + localStorage.getItem('pass') +
				'&school=' + $('#schoolname').val() +
				'&quantity=' + $('#quantity').val() +
				'&division=' + $('#division').val() +
				'&address=' + $('#address').val() +
				'&schoolphone=' + $('#schoolphone').val() +
				'&cellphone=' + $('#cellphone').val() +
				'&cheese=' + $('#cheese').val() +
				'&pepperoni=' + $('#pepperoni').val(),
				success: function(result) {
					if(result != -1) {
						alert('Ok! If we don\'t respond within about two days, email us at jets.chs@gmail.com.');
					} else {
						alert('Uh oh, I don\'t think it worked.')
					}
				}
			});
		}

		$(document).ready(function() {
			check();
			setInterval(function() {
				check();
			}, 10000);

			if($(window).width() < 900) {
				$('.form-control').css('width', '70%');
				$('.btn').css('width', 'calc(30% - 0.5rem)');
			}

			//mailing list enter button xd
			$('#mailname').keypress(function(e) {
				if(e.which == 13) {
					mailsubmit();
				}
			})
			///////////////////////GIVE OFFICER PRIVLAGES///////////////////////
			userAuth(function(auth) {
				if(auth >= 3) {
					$.ajax({
						url: 'http://gaminged.com/ei1/jets/net/request.php' +
						'?user=' + localStorage.getItem('user') +
						'&pass=' + localStorage.getItem('pass') +
						'&req=invitational',
						success: function(result) {
							$('#officer-add-teams').append(result.replace('REPLACENAME', localStorage.getItem('name')));
						}
					});
				} else {
					$('#officer-add-teams').remove();
				}
				if(auth == -1) {
					$('#getstarted').html('<p class=\'m\'>First, you\'re going to want to create an account. <br> <a href=\'logup#invitational#getstarted\'>Click here to do that!</a> <br> Come back here when you\'re done.</p>');
				} else {
					$.ajax({
						url: 'http://gaminged.com/ei1/jets/esus/validateCaptain.php' +
						'?user=' + localStorage.getItem('user') +
						'&pass=' + localStorage.getItem('pass'),
						success: function(result) {
							if(result == -1) {
								if(auth == 0) {
									$('#getstarted').append(`
										<p class='m'>
											Hi ` + localStorage.getItem('name') + `, your account isn't verified yet; that just means we need to contact you and make sure you are who you say you are. <br>
											But if you're a coach of your Science Olympiad team(s), fill out the form below to sign up! <br> <br>
										</p>
									`);
								} else {
									$('#getstarted').append(`
										<p class='m'>
											Hi ` + localStorage.getItem('name') + `! If you're a coach of your Science Olympiad team(s), you can go ahead and fill out the information below to sign up!
										</p>
									`);
								}
								$('#getstarted').append(`
									<p class='m'>What's the name of the school?</p><br>
									<input id='schoolname' type='text' class='form-control' placeholder='School Name'><br>
									<p class='m'>How many teams do you have?</p>
									<select id='quantity'>
										<option>1</option>
										<option>2</option>
										<option>3</option>
									</select><br>
									<p class='m'>What division are your teams in?</p>
									<select id='division'>
										<option>C</option>
										<option>B</option>
									</select><br>
									<p class='m'>What is your mailing address?</p><br>
									<input id='address' type='text' class='form-control' placeholder='Mailing Address'><br>
									<p class='m'>What is your phone number in school?</p><br>
									<input id='schoolphone' type='text' class='form-control' placeholder='School Phone Number'><br>
									<p class='m'>What is your cell phone number?</p><br>
									<input id='cellphone' type='text' class='form-control' placeholder='Cellphone Number'><br>
									<p class='m'>Pizza costs $15 each. How many do you want for:</p><br>
									<p class='m'>Cheese Pizza:</p> <input id='cheese' type='number' placeholder='0'><br>
									<p class='m'>Pepperoni Pizza:</p> <input id='pepperoni' type='number' placeholder='0'><br>
									<p class='m'>Got any questions? Email jets.chs@gmail.com</p><br>
									<input type='button' class='btn btn-primary' value='SUBMIT' onClick='signupForInvite()'>
									<br>
									<p class='m'>Below is if you don't want to sign up for anything just yet.</p>
									<br><br>
								`);
							} else {
								$('#getstarted').append(`
									<p class='m'>Congratulations! You're all set. This page is still under development, but soon you can come back here and check up on the status of things like your information, payment, and ESUS sign up.</p>
								`);
							}
						}
					});
				}
			});
		});

		///////////////////////////////EMAIL LIST///////////////////////////////
		var emailVerify = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
		function mailsubmit() {
			if(emailVerify.test($('#mailname').val())) {
				$('#mailerror').text('');
				$.ajax({
					url: 'http://gaminged.com/ei1/chsinvite/mailinglist.php?address=' + $('#mailname').val(),
					success: function(result) {
						if(result == 'yay') {
							$('#mailerror').css('color', 'green');
							$('#mailerror').text('Success!');
							alert('Thanks! We\'ll email you information on how to fully register for the invitational. If you\'d like to remove ' + $('#mailname').val() + ' from the mailing list, just reply to an email saying "stop", or contact us at jets.chs@gmail.com.');
							$('#mailname').val('');
						}
					}
				});
			} else {
				$('#mailerror').text('Invalid email address.');
			}
		}
	.content-container.container
		title CHS 2017 Invitational
		div.block
			script.
				$('.block').hide();
			h1.title CLEMENTS INVITATIONAL 2017
		div.block
			script.
				$('.block').hide();
			h2(style='margin-top: 2rem') It's finally here.
			br
			p.m We're excited to announce that Clements JETS will be hosting its first Science Olympiad Invitational!
			br
			p.m It will be held on 
			p.l December 16th 
			p.m at #[a(href='https://www.google.com/maps/place/Clements+High+School/@29.5743129,-95.6355284,17z/data=!3m1!4b1!4m5!3m4!1s0x8640e410a9b5941f:0x9b8073186dff22ae!8m2!3d29.5743129!4d-95.6333397?hl=en') Clements High School].
		div.block
			script.
				$('.block').hide();
			h2(style='margin-top: 6rem') About Our Tournament
			p We promise to deliver a quality invitational for you to enjoy.
			ul
				li.bullet #[p.l We prevent event conflicts.] Nobody likes to miss out because of a scheduling error, so we are taking great care to distribute our events so you can compete with ease.
				li.bullet #[p.l Everyone likes good quality.] We put personal time and effort into our tests, and we only use experienced and trained proctors. We're following the official rule book and will do our best to make you feel like you're at nationals.
				li.bullet #[p.l We've got everything covered.] We already have our tests prepared and enough people to run our competition. You can come in and compete with no need for you to worry about parent volunteers or submitting tests.
			p The Clements Invitational is being hosted because we wanted to help you and your Science Olympiad team better prepare for your advancement to statewide and national levels. We take pride in our work and want to deliver a great experience for you.
			//div#officer-add-teams
			//p Heres a list of teams that are confirmed to be attending the invitational:
			//p(id='teamlist')
		div.block
			script.
				$('.block').hide();
			h2 Here's The Details
			p.m It will be held on 
			p.l December 16th 
			p.m at #[a(href='https://www.google.com/maps/place/Clements+High+School/@29.5743129,-95.6355284,17z/data=!3m1!4b1!4m5!3m4!1s0x8640e410a9b5941f:0x9b8073186dff22ae!8m2!3d29.5743129!4d-95.6333397?hl=en') Clements High School].
			br
			p.m Admission is going to be priced at 
			p.l $120. 
			br
			p.s If you can't attend on December 16, you may retrospectively purchase a copy of the tests we used for $75.
			br
			p.m The deadline is #[em November 5th.] If you pay after this day, the late fee is $10.
			br
			p.m There is a $50 fee if you cancel you drop out of the contest after November 5th.
			br
			p.m We're rolling out our payment system shortly, and also will be releasing the schedule as well as other important information, It's recommended that you scroll to the bottom and add your email to our list so you don't miss out.
			br
			p.m Results will be visible from this page once the award ceremony ends.
		div.block
			script.
				$('.block').hide();
			h2 How Do I Get Started?
			div#getstarted
			p.m If you just want to get email updates, type in your email below to get added to the email list.
			br
			input(type='text' class='form-control' style='width: 25vw;display:inline' placeholder='Email Address' id='mailname')
			input(type='button' class='btn btn-primary mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent' value='SUBMIT' onClick='mailsubmit()').
			p(id='mailerror' style='color: red; font-size: 1.5rem')
			#officer-add-teams
		script.
			function animateIn(i) {
				$('.block:eq(' + i + ')').fadeIn(500);
				$('.block:eq(' + i + ')').css({'transition' : 'transform 0.5s ease-in-out'});
				$('.block:eq(' + i + ')').css({'transform' : 'translate(0, 0px)'});
			}
			$('.block').css({'transform' : 'translate(0, 100px)'});
			for(var i = 0; i < $('.block').length; i++) {
				setTimeout(animateIn.bind(null, i), i * 250);
			}